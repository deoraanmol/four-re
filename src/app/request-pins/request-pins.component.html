<div style="padding: 20px">
  <div style="padding-bottom: 20px">
    <h2>Request Status</h2>
    <div style="display: flex; justify-content: space-between">
      <select class="request-filter-dropdown" [(ngModel)]="selectedStatus" (change)="applyFilter($event.target.value, 'status')">
        <option *ngFor="let timeSlot of options">
          {{timeSlot}}
        </option>
      </select>
      <div class="rpins-filter-field">
        <input class="rpins-form-value" matInput [matDatepicker]="picker" placeholder="Choose Start Date"
               [(ngModel)]="selectedDate"
               (dateChange)="applyFilter($event.target.value, 'date')">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </div>

      <div>
        <button style="height: 40px; cursor: pointer" (click)="cancelRequests()">Cancel Requests</button>
      </div>
    </div>
  </div>
  <div>
    <h4>Selected Requests: {{selectedRequests.length}}</h4>
  </div>
  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>

    </th>
    <td mat-cell *matCellDef="let element">
      <input type="checkbox" [(ngModel)]="selection[element.requestId]" (change)="toggleRow(element)">
    </td>
  </ng-container>

  <ng-container matColumnDef="requestId">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Request ID </th>
    <td mat-cell *matCellDef="let element"> {{element.requestId}} </td>
  </ng-container>

  <ng-container matColumnDef="mobileNumber">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Mobile Number </th>
    <td mat-cell *matCellDef="let element"> {{element.mobileNumber}} </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
    <td mat-cell *matCellDef="let element"> {{element.name}} </td>
  </ng-container>

  <ng-container matColumnDef="society">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Society </th>
    <td mat-cell *matCellDef="let element"> {{element.society}} </td>
  </ng-container>

  <ng-container matColumnDef="flatNo">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Flat No </th>
    <td mat-cell *matCellDef="let element"> {{element.flatNo}} </td>
  </ng-container>

  <ng-container matColumnDef="noOfBags">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> No of Bags </th>
    <td mat-cell *matCellDef="let element"> {{element.noOfBags}} </td>
  </ng-container>

  <ng-container matColumnDef="startDate">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Pickup Start Date </th>
    <td mat-cell *matCellDef="let element"> {{element.startDate | date: 'dd MMM yyyy, hh:mm a'}} </td>
  </ng-container>

  <ng-container matColumnDef="endDate">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Pickup End Date </th>
    <td mat-cell *matCellDef="let element"> {{element.endDate | date: 'dd MMM yyyy, hh:mm a'}} </td>
  </ng-container>

  <ng-container matColumnDef="pickupCode">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Pickup Code </th>
    <td mat-cell *matCellDef="let element"> {{element.pinCode}} </td>
  </ng-container>

  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
    <td mat-cell *matCellDef="let element"> {{element.status}} </td>
  </ng-container>

  <ng-container matColumnDef="requestValue">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Payment Amount </th>
    <td mat-cell *matCellDef="let element"> {{element.totalValue}} </td>
  </ng-container>

  <ng-container matColumnDef="paymentType">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Payment Type </th>
    <td mat-cell *matCellDef="let element"> {{element.paymentType}} </td>
  </ng-container>

  <ng-container matColumnDef="accountId">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Payment Account ID </th>
    <td mat-cell *matCellDef="let element"> {{element.accountId}} </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>
</div>
